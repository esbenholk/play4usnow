

(function() {

    let openingQuery = [ {
        question: "Are you ready to play a dangerous game?",
        questionID:"feelings_towards_danger",
        headline: "Welcome",
        description: "",
        answers: ["Danger Turns Me On",
            "Get Me Out Of Here"
            ],
        images: [],
        inputfield: false,
        link: [""],
        url : "https://thumbs.gfycat.com/AthleticSimpleHuemul-size_restricted.gif",
    }
   
]
let queries = [
   
    {
        question: "",
        questionID:"what_you_want_singles_to_know",
        headline: "Meet sexy singles",
        description: "Singles in your area are looking to meet you! Tell them something about yourself!",
        answers: [],
        images: [],
        inputfield: true,
        link: [],
        url : "https://image.shutterstock.com/z/stock-photo-sexy-closeup-portrait-of-handsome-topless-male-model-with-beautiful-eyes-sexy-man-or-muscular-747567787.jpg",

    },
    {
        question: "",
        questionID:"sex_role",
        headline: "",
        description: "For the hottest user experience, tell us about yourself.<br> Are you a: ",
        answers: ["Dominant",
            "Submissive",
            "Masochist",
            "Sadist",
            "Fetishist",
           " Vanilla Sundae"
            ],
        images: [],
        inputfield: false,
        link: [""],
        url : "https://64.media.tumblr.com/5710cff53f63ee210f0d922b9b8948d5/tumblr_pa386bxJTg1ri4zv1o1_540.gifv",
        color: ["pink", "white"]
    },
    {
        question: "Have you ever paid for the following services? ",
        questionID:"sex_work_consumer_experience",
        headline: "",
        description: "",
        answers: ["Porn",
            "Stripping",
            "Camming",
            "Fetish/Domination",
            "OnlyFans",
            "Sexual Intercourse",
            "Other Sexual Service / Content",
            "I don't consume these services",
            ],
        images: [],
        inputfield: false,
        link: [""],
        url : "https://play4usnow.s3.amazonaws.com/sissy/Screen+Shot+2020-10-09+at+11.53.15.png",
        color: ["rgb(255, 0, 225)", "yellow"]
    },

    {
        question: "Have you been paid for any of the following services?",
        questionID:"sex_work_experience",
        headline: "",
        description: "",
        answers: ["Porn",
            "Stripping",
            "Camming",
            "Fetish/Domination",
            "OnlyFans",
            "Sexual Intercourse",
            "Other Sexual Service / Content",
            "I don't perform these services",
            "I do these things for free"
            ],
        images: [],
        inputfield: false,
        link: [""],
        url : "https://media2.giphy.com/media/10rtoKqcDukJgc/giphy.gif?cid=ecf05e47sqo9x5operabvngievvqd8ql53onjm3gx5qkg4dn&rid=giphy.gif",
        color: ["white", "red"]
    },
    {
        question: "CLICK HERE IF YOU LIKE SEXY FEET",
        questionID:"follows_link_to_foot_porn",
        headline: "this is an advertisement! this is an advertisement! this is an advertisement!",
        description: "",
        answers: [],
        images: [],
        inputfield: false,
        link: ["https://www.pornblade.com/category/foot-porn/","https://play4usnow.s3.amazonaws.com/feet2.gif"],
        url : "",
        color: ["white", "red"]
    },
    {
        question: " What are you looking for?",
        questionID:"looking_for",
        headline: "",
        description: "Calling lost souls in anonymous proxy",
        answers: ["Friendship",
           " Sex",
            "Love",
            "A Reason to Live",
          "  A Reason to Die"
            ],
        images: [],
        inputfield: false,
        link: [""],
        url : "https://play4usnow.s3.amazonaws.com/cutoutlogo.jpg",
        color: ["#00ff11", "#6200ff"]
    },
    {
        question: "Wanna be our dog?",
        questionID:"desire_to _be_a_dog",
        headline: "",
        description: "",
        answers: ["Woof", "I want to be caged", "Can I sleep at the end of your bed?", "I need training", "I think I’m a cat", "I like being a human"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/MCh._Silverbarn%27s_Ulfi_a3_q.jpg/800px-MCh._Silverbarn%27s_Ulfi_a3_q.jpg",
        color: ["black", "red"]
    },
    {
        question: "Does revealing your data make you horny?",
        questionID:"does_data_make_horny",
        headline: "Take my identity and expose me",
        description: "",
        answers: ["Yes, but I’m trying to resist", "Take all my data", "I’m a private person", "My loved ones know everything about me and accept me"] ,
        images: [],
        inputfield: false, 
        link: [ ],
        url : "https://www.assuranceagency.com/Media/Default/blog/headers/Voluntary%20Series_Identity%20Theft.jpg",
        color: ["pink", "yellow"]
    },
    {
        question: "Tell us a sexy confession.",
        questionID:"confession",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
   {

        question: "What’s the biggest lie you’ve told?",
        questionID:"told_a_lie",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
   {

        question: "Tell us something your family doesn’t know about you.",
        questionID:"secret_kept_from_your_family",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
   {

        question: "What kind of crimes have you committed?",
        questionID:"crime_committed",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
   {

        question: "What addictions have you had?",
        questionID:"addictions",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },


{
        question: "What’s your life regret?",
        questionID:"life_regret",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },

    {
        question: "What’s your favorite sexual activity?",
        questionID:"favorite_activity",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
    {
        question: "What’s your most embarrassing sexual secret?",
        questionID:"sexual_secret",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },
    {
        question: "Have you ever cheated on a partner?",
        questionID:"cheated",
        headline: "",
        description: "",
        answers: ["yes","no"] ,
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["black", "yellow"]
    },
    {
        question: "Which of the following would you enjoy?",
        questionID:"act_user_enjoys",
        headline: "",
        description: "",
        answers: ["Acting Like A Dog",
        "Getting Fucked In The Ass",
        "Worshipping Feet",
        "Giving Away Money",
        "Being Humiliated",
        "Getting Tied Up",
        "Being Spanked/Beaten",
        "Wearing a Chastity Belt"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },
    {
        question: "Which of the following would you enjoy?",
        questionID:"act_user_enjoys",
        headline: "",
        description: "",
        answers: ["Acting Like A Dog",
        "Getting Fucked In The Ass",
        "Worshipping Feet",
        "Giving Away Money",
        "Being Humiliated",
        "Getting Tied Up",
        "Being Spanked/Beaten",
        "Wearing a Chastity Belt"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },

   {

        question: "What’s the worst thing you’ve done to another person?",
        questionID:"harming_another_person",
        headline: "",
        description: "",
        answers: [] ,
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["blue", "purple"]
    },

    {
        question: "What’s your mother’s maiden name?",
        questionID:"mothers_maiden_name",
        headline: "",
        description: "",
        answers: [],
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },
    {
        question: "What city were you born in?",
        questionID:"birth_city",
        headline: "",
        description: "",
        answers: [],
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },
    {
        question: "What is the name of your first pet?",
        questionID:"first_pet",
        headline: "",
        description: "",
        answers: [],
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["red", "pink"]
    },
    {
        question: "What was your childhood nickname?",
        questionID:"childhodd_nickname",
        headline: "",
        description: "",
        answers: [],
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },
    {
        question: "What was the name of your elementary / primary school?",
        questionID:"elementary_school",
        headline: "",
        description: "",
        answers: [],
        images: [],
        inputfield: true, 
        link: [ ],
        url : "",
        color: ["white", "black"]
    },
    {
        question: "Which services would you like to receive? ",
        questionID:"service_choice",
        headline: "",
        description: "",
        answers: ["Musical striptease burlesque",
        "Vampiress / Schoolgirl Bondage and Teasing",
        "Demon Kitten Furry Play",
        "Big Tit Play",
        "Forced Feminist Reading",
        "Erotic Hypnosis",
        "Puppet Peep Show"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["yellow", "black"]
    },
    {
        question: "Which performer would you like to meet? ",
        questionID:"performer_choice",
        headline: "",
        description: "",
        answers: ["Petra Blair",
        "Kiko",
        "Violet Violent",
        "Mistress Amandara",
        "Goofy Toof",
        "Vega Bonita",
        "Goddess Vanessa"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["red", "white"]
    },
    {
        question: "Do you want to be watched?",
        questionID:"do_you_want_to_be_watched",
        headline: "We’re watching you",
        description: "",
        answers: ["Yes", "Yes, please", "Yes, please Goddess", "Please, I beg you", "I won’t ever deserve your attention", "How much can I pay you for the honor?"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["red", "white"]
    },
    {
        question: "What do you need?",
        questionID:"need",
        headline: "Don't Lie",
        description: "",
        answers: ["A way through", "A sense of peace", "Someone to take control", "Freedom"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["red", "white"]
    },
    {
        question: "How often do you masturbate?",
        questionID:"masturbation",
        headline: "",
        description: "continue for more ways of gratifying yourself",
        answers: ["Daily", "Weekly", "Monthly","Continuously", "Never"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["red", "white"]
    },
    {
        question: "Have you ever been turned on from looking at art?",
        questionID:"art_turn_on",
        headline: "Try gratification today! FREE sign up!",
        description: "",
        answers: ["Yes", "No", "This turns me on, but is it art?", "Art is for the rich", "Data turns me on", "I like it when art takes control"],
        images: [],
        inputfield: false, 
        link: [ ],
        url : "",
        color: ["black", "grey"]
    },              
       
       
       
       
       
       
]


 
    let colors = ["red", "#e04ac7", "#00ff19", "#000000", "#6ba1ff", "#00fbbc", "#ff9d00", "#fe6fff"]
  
   
    let answer = "";
    let name = $("#name")[0].innerText;
 
    function showPopUp(){
        createPopUp(queries);
    
        let closePopUp = document.getElementById("closePopUp");
        
        closePopUp.addEventListener("click", function(ev){
            answer = "too shy to answer";
        })
    }
    function showFirstPopUp(){
        createPopUp(openingQuery);
    
        let closePopUp = document.getElementById("closePopUp");
        
        closePopUp.addEventListener("click", function(ev){
            answer = "too shy to answer";
        })
    }

  

    function createPopUp(queryarray){
        var form = document.getElementById("popup");
       
        var question = document.getElementById("question");
        var headline = document.getElementById("popupHeadline");
        var description = document.getElementById("descriptiontext");
        var answers = document.getElementById("answers");
        answers.innerHTML = "";
        description.innerHTML = "";
        headline.innerHTML = "";
        question.innerHTML = "";
        var questionID = document.getElementById("questionID");
        questionID.innerHTML = "";
        
       
        let currentQueryIndex = Math.floor(Math.random()*queryarray.length);
        let currentQuery = queryarray[currentQueryIndex];
        queryarray.splice( currentQueryIndex, 1);
        console.log(queryarray, queryarray.length);

        question.innerHTML = currentQuery.question;
        if(currentQuery.headline){
            headline.innerHTML = currentQuery.headline + ", " + capitalizeFirstLetter(name);
        }
        description.innerHTML = currentQuery.description
        questionID.innerHTML = currentQuery.questionID;
  
        if(currentQuery.answers.length>0){
            for (let index = 0; index < currentQuery.answers.length; index++) {
                var textbutton = document.createElement("button");
                textbutton.setAttribute("type", "submit")
                textbutton.classList.add("button")
                textbutton.innerHTML =  currentQuery.answers[index];
                answers.append(textbutton);
                textbutton.addEventListener("click", function(ev){
                    answer = ev.target.innerHTML;
                })
                if(currentQuery.color){
                    styling(textbutton, currentQuery.color);
                }
            }
        } else if (currentQuery.images.length>0){  
            for (let index = 0; index < currentQuery.images.length; index++) {
                var imagebutton = document.createElement("button");
                imagebutton.setAttribute("type", "submit")
                imagebutton.classList.add("button")
                imagebutton.classList.add("imageChoice")
               
                let image = document.createElement("img");
                image.src = currentQuery.images[index]
                imagebutton.append(image); 
                if(currentQuery.images.length>2){
                    imagebutton.style.width = "100px"
                }
               
                answers.append(imagebutton);
                imagebutton.addEventListener("click", function(ev){
                    answer = currentQuery.images[index];
                })
            }
        } else if(currentQuery.inputfield){
            let inputfield = document.createElement("input");
            inputfield.setAttribute("name", "answer");
            inputfield.setAttribute("id", "answer");
            answers.appendChild(inputfield);
            var button = document.createElement("button");
            button.setAttribute("type", "submit")
            button.classList.add("inputfield-button")
            button.innerHTML =  "submit"
            answers.append(button);
            button.addEventListener("click", function(ev){
                answer = inputfield.value;
                console.log("inputfield", answer);
            })
         
        } else if(currentQuery.link.length>0){
            answers.innerHTML = `<a href="${currentQuery.link[0]}" target="_blank"><img src="${currentQuery.link[1]}"/></a>`;
        }

        if(currentQuery.color){
            styling(description, currentQuery.color);
        }




        let csurf_hiddenInput = document.createElement("input")
        csurf_hiddenInput.setAttribute("type", "hidden")
        csurf_hiddenInput.setAttribute("value", $('meta[name="_csrf"]').attr('content'))


        randomStyling(form, headline, question, answers, currentQuery.url);

        

    }
    function styling(element, color){
        element.style.backgroundColor = color[0];
        element.style.color = color[1];
        element.style.border = `2px solid ("${color[1]}")`;
    }

    function randomStyling(form, headline, question, answers, background){
    
        let windowHeight = window.innerHeight;
        let windowWidth = window.innerWidth;

        if(window.innerWidth>750){
            form.style.width = 400 +"px"
         
            form.style.top = getRandomNumberBetween(0,windowHeight-400) +"px";
            form.style.left = getRandomNumberBetween(0,windowWidth-400)+"px";
        } else{
            form.style.width = 250 +"px"
         
            form.style.top = getRandomNumberBetween(0,windowHeight-250) +"px";
            form.style.left = getRandomNumberBetween(0,windowWidth-250)+"px";
            form.style.top = 0;
            form.style.left =0;
        }

        form.style.background = "";

        let backgroundColor = pickColor(colors);
        form.style.backgroundColor = backgroundColor;
    
        if(background.length > 1){
            form.style.background= `url("${background}")`;
        }


        form.style.display = "block"
        document.body.append(form);
       
    }

    function capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }
    function getRandomNumberBetween(min,max){
        return Math.floor(Math.random()*(max-min+1)+min);
    }
    function pickColor(colors){
        let index = Math.floor(Math.random() * colors.length);
        let color = colors[index]
        queries.splice( index, 0);
        return color
    }
  

    setTimeout(showFirstPopUp, 35000);



    $("#popup").submit(function(e) {
        e.preventDefault();
        let question = document.getElementById("questionID").innerHTML;
           
        $.post(
            "/ajax",
            {
                answer: answer,
               question: question,
                _csrf : $('meta[name="_csrf"]').attr('content')
            }, function (data) {
                console.log(data);
            });
        
        $("#popup").css("display","none");

        if(queries.length>0){
            if(answer === "too shy to answer"){
             
                setTimeout(showPopUp, 3000); 
            } else {
                setTimeout(showPopUp, 15000); 
            }
        }
     
       
    });

})();


